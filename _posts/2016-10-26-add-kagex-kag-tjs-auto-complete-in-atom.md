---
layout: "post"
title: "改善 AVG 制作工具之脚本录入篇-为 Atom 添加 KAGEX/KAG/TJS 脚本自动补全功能"
date: "2016-10-26 21:37"
---

先放效果图

![Imgur](http://i.imgur.com/N3GtQ1f.gif)

## 吐槽

在写脚本的过程中，会出现 n 多重复的指令，一般情况下，大家都把这个过程机械式的重复打字或者复制粘贴来解决这个需求，不过在编程的时候大多数情况会有 auto complete（自动补全）的文本编辑器或者 IDE 存在，使用自动补全功能能够大大的提高写代码的效率，同时也能让自己在写代码的过程更专注于去想这个功能式是怎么实现的而不是心里不耐烦的敲打键盘，打的指令还是并没有什么卯月却又不得不写出来的说冗余也不是冗余，但能让看的其他人更容易理解的代码，比如日系一大波解包之后看演出代码都是原生 tag 指令的一堆指令，明明可以提取成带参数的 macro（宏）然后几句搞定，却非要写一大堆呢。不过由于并不知道人家在制作过程中使用的工具是否有 auto complete 也不知道写脚本的人在写的时候的心情到底是怎么样的。

## 发现需求

上面吐槽了一大堆，其实就是：窝想要一个带有 auto complete（自动补全）功能的文本编辑器能让在录入脚本时愉快的玩耍。

## 尝试解决

在发现 Atom 写 snippets 之后就可以实现一个可以用的 auto complete（自动补全）功能之后，窝安心了。（因为不用自己造轮子省去 n 多麻烦，n 多时间，同时因为有现成的 [Biscrat](https://github.com/sakano) 写的 [language-kagex](https://github.com/sakano/language-kagex) [language-tjs](https://github.com/sakano/language-tjs) 这两个语法高亮插件，让读代码的时候更舒服，再加上 Atom 的 UI 和 语法 主题有大量可供选择，简直不要太开心啊。）

## 解决方案

1. 装完 [Atom](https://atom.io) 之后选择 `File` -> `Snippets` 会打开默认的 Snippets 文件。
2. 把 [这个 gist](https://gist.github.com/yaqinking/729582834b8483f0cdc3e4d72af7ddbd) 文件里的代码拷贝粘贴到里面，保存。
3. 打开一个 `.ks` 文件在里面输入 `prefix` 里面定义的关键字，按 `Tab` 之后就会自动补全成定义好的指令。（如：输入 `b` 之后应该会出现有 `bgm` 这个浮动提示框，然后按 `Tab` 键之后就会自动补全成 `@bgm storage=CURSOR` 再按一下 `Tab` 键跳到 `CURSOR` 那里输入文件名，然后再按一下 `Tab` 键就会调到下一行开始处。这样的操作不要太流畅唉~ 会有一种窝只需要不停的按 `Tab` 之后光标会调到指定位置，然后就可以写参数了，不用窝写指令也不用按方向键？嗯，你把自己所在的制作组封装的宏指令定义好之后，是可以达到类似的效果的。）
4. 效果见题图。

## 其它想法

- 这个其实就是一个 自动补全 的功能，可以在任何其它需要 自动补全 功能的任意语言，写作，etc. 中使用
- 为什么在 AVG 制作工具中，自动补全这个功能没人去做到编辑器中呢？谁知道呢。或者是不需要？不过窝还是认为：有的话会节省点时间。（时间是有限的，有限的东西是宝贵的。）

最后，希望能给 creator 们一点点想法，对创作流程中解决操作繁琐的部分有点启示，最好能在创作过程中起到一点点帮助就好了。

~~友情提示：有些链接需要自备梯子。以上。~~
